(()=>(e,n)=>{(async()=>{if(!["//www.bilibili.com/watchlater/#/list"].some((e=>document.URL.includes(e)))){return}const{getWatchlaterList:t}=await n.importAsync("watchlater-api");const i=await SpinQuery.select(".watch-later-list .list-box");if(i===null){return}n.applyStyleFromText(`\n    .expire-warning {\n      padding: 3px 25px;\n      color: #F78C6C;\n      display: inline-flex;\n      align-items: center;\n    }\n    .expire-warning .mdi {\n      line-height: 1;\n      margin-right: 8px;\n      font-size: 16px;\n    }\n`,"watchlater-expire-warning-style");const a=e.watchlaterExpireWarningDays;const r=24*3600*1e3;const l=e=>(e-Number(new Date))/r;Observer.childListSubtree(i,(async()=>{const e=[...i.querySelectorAll(".av-item .state")];const n=await t(true);e.forEach(((e,t)=>{const i=n[t].add_at*1e3+60*r;const c=l(i);console.log(n[t].aid,c);if(c<a){if(e.querySelector(".expire-warning")===null){const n=-Math.floor(-c);e.insertAdjacentHTML("afterbegin",`\n<span class="expire-warning" title="到期时间: ${new Date(i).toLocaleString()}"><i class="mdi mdi-alert-circle-outline"></i>还剩${n}天过期</span>`)}}else{e.querySelectorAll(".expire-warning").forEach((e=>e.remove()))}}))}))})()})();