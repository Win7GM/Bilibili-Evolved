(()=>(t,e)=>{function i(t=true){const e=document.title.replace("_番剧_bilibili_哔哩哔哩","").replace("_电影_bilibili_哔哩哔哩","").replace("_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili","").replace(" - 哔哩哔哩直播，二次元弹幕直播平台","").replace(/[\/\\:\*\?"<>\|]/g," ").trim();if(!t||document.URL.indexOf("/bangumi")!==-1){return e}else{const t=document.querySelector("#multi_page .cur-list>ul li.on a");if(t===null){return e}else{const i=t.getAttribute("title");return e+" - "+i}}}function r(t,e=true,i={}){const r=new Date;const n={title:document.title.replace(/：([^：]+?)_(番剧|国创|电影|纪录片|电视剧)_bilibili_哔哩哔哩/,"").replace("_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili","").replace(/(.*?) - (.*?) - 哔哩哔哩直播，二次元弹幕直播平台/,"$1").trim(),ep:(()=>{if(!e){return}const t=dq("#eplist_module li.cursor .ep-title");if(t!==null){return t.innerText}const i=document.querySelector("#multi_page .cur-list>ul li.on a");if(i!==null){return i.getAttribute("title")}})(),aid:unsafeWindow.aid,cid:unsafeWindow.cid,lid:document.URL.replace(/https:\/\/live\.bilibili\.com\/(\d+).*/,"$1"),y:r.getFullYear().toString(),M:(r.getMonth()+1).toString().padStart(2,"0"),d:r.getDate().toString().padStart(2,"0"),h:r.getHours().toString().padStart(2,"0"),m:r.getMinutes().toString().padStart(2,"0"),s:r.getSeconds().toString().padStart(2,"0"),ms:r.getMilliseconds().toString().substr(0,3)};Object.assign(n,i);const l=Object.keys(n).reduce(((t,e)=>t.replace(new RegExp(`\\[([^\\[\\]]*?)${e}([^\\[\\]]*?)\\]`,"g"),n[e]?`$1${n[e]}$2`:"")),t);return l.replace(/[\/\\:\*\?"<>\|]/g," ")}function n(e=true){if(t.filenameFormat===undefined){return i(e)}return r(t.filenameFormat,e)}return{export:{getFriendlyTitle:n,formatTitle:r}}})();