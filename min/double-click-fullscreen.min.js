(()=>(i,e)=>{const l=()=>{const e=["https://www.bilibili.com/bangumi/","https://www.bilibili.com/video/"];if(!e.some((i=>document.URL.startsWith(i)))){return}if(i.touchVideoPlayer&&i.touchVideoPlayerDoubleTapControl){Toast.info("在开启了<span>播放器触摸支持-启用双击控制</span>后, <span>双击全屏</span>功能将无效.","提示");i.doubleClickFullscreen=false;return}Observer.videoChange((async()=>{await SpinQuery.unsafeJquery();const e=await SpinQuery.condition((()=>dq(".bilibili-player-area")),(i=>i!==null&&unsafeWindow.$(".bilibili-player-video").data("events")));if(e===null){return}const l="double-click-fullscreen";if(!e.classList.contains(l)){e.classList.add(l);const n=unsafeWindow.$(".bilibili-player-video");const s=i.doubleClickFullscreenPreventSingleClick?n.data("events").click[0].handler:()=>{};const c=new DoubleClickEvent((()=>dq(".bilibili-player-video-btn-fullscreen").click()),(i=>s(i)));if(i.doubleClickFullscreenPreventSingleClick){n.unbind("click")}c.bind(n[0])}}))};l()})();