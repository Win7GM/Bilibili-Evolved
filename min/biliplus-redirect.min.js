(()=>(e,i)=>{const c=`www.biliplus.com`;const n=["bilibili.com/video/","bilibili.com/bangumi/play","space.bilibili.com"];return{widget:{condition:()=>n.some((e=>document.URL.includes(e))),content:`\n<a class="gui-settings-flat-button" id="biliplus-redirect">\n<i class="icon-biliplus"></i>\n<span>转到BiliPlus</span>\n</a>`,success:()=>{const e=document.querySelector("#biliplus-redirect");const i=/\/video\/(av[\d]+|BV.+)/i;const n=()=>{e.href="";e.disabled=true};const o=i=>{if(document.URL!==i){e.href=i}else{n()}};if(location.host==="space.bilibili.com"){const e=document.URL.replace("space.bilibili.com/",`${c}/space/`);o(e)}else if(document.URL.includes("/bangumi/play")){Observer.videoChange((()=>{const e=document.querySelector(".av-link,.info-sec-av");const i=unsafeWindow.aid||e.innerText.replace(/[aAvV]/g,"");const n=`https://${c}/video/av${i}/`;o(n)}))}else if(i.test(document.URL)){const[,e]=document.URL.match(i);o(`https://${c}/video/${e}/`)}else{Observer.videoChange((()=>{const e=document.URL.replace(window.location.host,c);o(e)}))}}}}})();