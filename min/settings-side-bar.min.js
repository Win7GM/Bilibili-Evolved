(()=>(e,t)=>{if(document.querySelector(".gui-settings-icon-panel")===null){document.body.insertAdjacentHTML("beforeend",`\n<div class='gui-settings-icon-panel icons-enabled'>\n<div class='gui-settings-widgets' title='附加功能'>\n<i class="icon-widgets"></i>\n</div>\n<div class='gui-settings' title='设置'>\n<i class="icon-settings"></i>\n</div>\n</div>`);dq(".gui-settings").addEventListener("click",(e=>{if(e.shiftKey===false){dqa(".gui-settings-box,.gui-settings-mask").forEach((e=>e.classList.add("opened")))}else{dqa(".bilibili-evolved-about,.gui-settings-mask").forEach((e=>e.classList.add("opened")));const e=dq(".bilibili-evolved-about");if(e){raiseEvent(e,"be:about-load-community")}}}));dq(".gui-settings-widgets").addEventListener("click",(e=>{if(e.shiftKey===false){dqa(".gui-settings-widgets-box,.gui-settings-mask").forEach((e=>e.classList.add("opened")))}else{debugger}}));const e=dq(".gui-settings-icon-panel .gui-settings-widgets>i");const t=dq(".gui-settings-icon-panel .gui-settings>i");let i=false;let s=false;const n=()=>{t.classList.remove("icon-info");t.classList.add("icon-settings");t.parentElement.title="设置";e.classList.remove("icon-time");e.classList.add("icon-widgets");e.parentElement.title="附加功能";i=false;s=false};const d=()=>{t.classList.remove("icon-settings");t.classList.add("icon-info");t.parentElement.title="关于";e.classList.remove("icon-widgets");e.classList.add("icon-time");e.parentElement.title="「ザ・ワールド」";if(!i){document.body.addEventListener("keyup",n,{once:true});i=true}if(!s){window.addEventListener("blur",n,{once:true});s=true}};document.body.addEventListener("keydown",(e=>{if(document.activeElement&&["input","textarea"].includes(document.activeElement.nodeName.toLowerCase())){return}if(e.shiftKey===true){d()}}))}addSettingsListener("sideBarOffset",(e=>{document.documentElement.style.setProperty("--side-bar-offset",e+"vh")}),true)})();