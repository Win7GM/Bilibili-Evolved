(()=>(e,t)=>{const l=()=>{SpinQuery.select(".custom-scrollbar").then((e=>e&&e.classList.remove("custom-scrollbar")))};const r=()=>{document.body.classList.remove("dark");t.removeStyle("darkStyleNavBar");t.removeStyle("darkStyle");t.removeStyle("darkStyleImportant")};const o=["//member.bilibili.com/v2","//member.bilibili.com/video/upload.html","//member.bilibili.com/article-text/home","//www.bilibili.com/audio/submit/","//member.bilibili.com/studio/bs-editor/projects","//www.bilibili.com/s/video/","//member.bilibili.com/platform"];const i=()=>{if(e.noDarkOnMember&&o.some((e=>{if(typeof e==="string"){return document.URL.replace(location.search,"").includes(e)}else{return e.test(document.URL.replace(location.search,""))}}))){r();return}document.body.classList.add("dark");window.localStorage.setItem("pbp_theme_v4","b");l();if(!e.useDarkStyleAsUserStyle){t.applyImportantStyle("darkStyleNavBar");t.applyStyle("darkStyle");t.applyImportantStyle("darkStyleImportant")}};i();addSettingsListener("useDarkStyleAsUserStyle",(()=>{r();i()}));return{reload:i,unload:r}})();