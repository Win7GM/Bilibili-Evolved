(()=>(t,i)=>{const a=async(t,i)=>{const a=i?"https://api.bilibili.com/x/v2/history/toview/add":"https://api.bilibili.com/x/v2/history/toview/del";const e=getCsrf();const s=await Ajax.postTextWithCredentials(a,`aid=${t}&csrf=${e}`);const o=JSON.parse(s);if(o.code!==0){throw new Error(`稍后再看操作失败: ${o.message}`)}};async function e(t=false){const i=`https://api.bilibili.com/x/v2/history/toview/web`;const a=await Ajax.getJsonWithCredentials(i);if(a.code!==0){throw new Error(`获取稍后再看列表失败: ${a.message}`)}if(!a.data.list){return[]}if(t){return a.data.list}return a.data.list.map((t=>t.aid))}return{export:{toggleWatchlater:a,getWatchlaterList:e}}})();